<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ETH/BTC套利监控</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    background:#0b0f1a;
    color:white;
}

.container{
    padding:16px;
}

.card{
    background:#121826;
    border-radius:16px;
    padding:16px;
    margin-bottom:14px;
    box-shadow:0 4px 20px rgba(0,0,0,0.3);
}

.title{
    font-size:14px;
    opacity:0.7;
}

.big{
    font-size:36px;
    font-weight:700;
    margin-top:6px;
}

.signal{
    font-size:20px;
    font-weight:600;
    margin-top:6px;
}

.good{ color:#22c55e; }
.bad{ color:#ef4444; }
.neutral{ color:#facc15; }

canvas{
    width:100%;
    height:240px;
}
</style>
</head>

<body>

<div class="container">

<div class="card">
<div class="title">ETH-BTC 24h差值</div>
<div id="diff" class="big">--</div>
<div id="zone" class="signal neutral">等待信号</div>
</div>

<div class="card">
<div class="title">套利建议</div>
<div id="action" class="signal">等待数据</div>
</div>

<div class="card">
<div class="title">组合PnL</div>
<div id="pnl" class="big">0%</div>
</div>

<div class="card">
<div class="title">持仓时间</div>
<div id="timer" class="big">0m</div>
</div>

<div class="card">
<div class="title">ETH/BTC差值趋势</div>
<canvas id="chart"></canvas>
</div>

</div>

<script>
let history=[];
let startTime=null;

const chart=new Chart(document.getElementById('chart'),{
type:'line',
data:{labels:[],datasets:[{label:'Diff %',data:[]}]},
options:{responsive:true}
});

async function fetchData(){
try{
let btc=await fetch("https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT").then(r=>r.json());
let eth=await fetch("https://api.binance.com/api/v3/ticker/24hr?symbol=ETHUSDT").then(r=>r.json());

let btcChange=parseFloat(btc.priceChangePercent);
let ethChange=parseFloat(eth.priceChangePercent);

let diff=ethChange-btcChange;

updateUI(diff);
}catch(e){}
}

function updateUI(diff){

document.getElementById("diff").innerText=diff.toFixed(2)+"%";

let zone="等待信号";
let action="观望";

if(Math.abs(diff)>=2){
zone="套利区";
if(diff>0){
action="做空ETH / 做多BTC";
}else{
action="做多ETH / 做空BTC";
}

if(!startTime) startTime=Date.now();

}else{
startTime=null;
}

document.getElementById("zone").innerText=zone;
document.getElementById("action").innerText=action;

if(startTime){
let mins=Math.floor((Date.now()-startTime)/60000);
document.getElementById("timer").innerText=mins+"m";
}

history.push(diff);
if(history.length>40) history.shift();

chart.data.labels=history.map((_,i)=>i);
chart.data.datasets[0].data=history;
chart.update();
}

setInterval(fetchData,5000);
fetchData();
</script>

</body>
</html>
